<ion-header>
  <ion-toolbar color="secondary">
    <ion-title
      style="color:white;font-family: Roboto;font-weight: 700;line-height: 58px;text-align: center;margin-right: -65px;">
      {{this?.Site?.siteName}}
    </ion-title>
    <ion-buttons slot="secondary">
      <ion-button fill="solid" style="font-size: 18px;" [routerLink]="'/home'" routerDirection="forward"
        color="secondary">
        <ion-icon slot="start" name="home"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>
<ion-content>
  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content pullingIcon="arrow-dropdown" pullingText="" refreshingSpinner="circles">
    </ion-refresher-content>
  </ion-refresher>
  <super-tabs>
    <super-tabs-toolbar slot="top" style="background-color: #a0a6b9;">
      <super-tab-button style="padding-bottom: 47px;">
        <ion-label style="padding-top: 50px; color: white;font-size: 12.2px;">Energie</ion-label>
      </super-tab-button>
      <super-tab-button style="padding-bottom: 47px;">
        <ion-label style="padding-top: 50px;color: white;font-size: 12.2px;">Courant</ion-label>
      </super-tab-button>
      <super-tab-button style="padding-bottom: 47px;">
        <ion-label style="padding-top: 50px;color: white;font-size: 12.2px;">Tension</ion-label>
      </super-tab-button>
      <super-tab-button style="padding-bottom: 47px;">
        <ion-label style="padding-top: 50px;color: white;font-size: 12.2px;">Puissance</ion-label>
      </super-tab-button>
    </super-tabs-toolbar>
    <super-tabs-container>
      <super-tab>
        <ng-container *ngFor="let box of boxes">
          <ng-container *ngFor='let index of box.devices'>
            <ng-container *ngIf="index.indicator.name=='Energie' && index.mesures['0'] ">
              <ion-card>
                <ion-card-header>
                  <ion-label>{{box.name}}</ion-label>
                </ion-card-header>
                <ion-card-content>
                  <div class="row">
                    <div class="col-12">
                      <label class="titles" style="margin-top: 10px;">{{index.name}}</label>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-12">
                      <ion-icon name="speedometer"></ion-icon>
                      <label class="titles" style="-webkit-text-stroke-width: thin;">{{index.mesures[0].valeur1}} |
                        {{index.mesures[0].valeur2}} |
                        {{index.mesures[0].valeur3}}</label>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-12">
                      <ion-icon name="time"></ion-icon>
                      <label class="titles">{{index.mesures[0].createdAt.date | date: 'dd-MM-yyyy HH:mm' }}</label>
                    </div>
                  </div>
                  <ion-icon name="bookmark"></ion-icon>
                  <label class="titles">{{index.model.name}}</label>
                </ion-card-content>
              </ion-card>
            </ng-container>
          </ng-container>
        </ng-container>


      </super-tab>



      <super-tab>
        <ng-container *ngFor="let box of boxes">
          <ng-container *ngFor='let index of box.devices'>
            <ng-container *ngIf="index.indicator.name=='Courant' && index.mesures['0'] ">
              <ion-card>
                <ion-card-header>
                  <ion-label>{{box.name}}</ion-label>
                </ion-card-header>
                <ion-card-content>
                  <div class="row">
                    <div class="col-12">
                      <label class="titles" style="margin-top: 10px;">{{index.name}}</label>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-12">
                      <ion-icon name="speedometer"></ion-icon>
                      <label class="titles" style="-webkit-text-stroke-width: thin;">{{index.mesures[0].valeur1}} |
                        {{index.mesures[0].valeur2}} |
                        {{index.mesures[0].valeur3}}</label>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-12">
                      <ion-icon name="time"></ion-icon>
                      <label class="titles">{{index.mesures[0].createdAt.date | date: 'dd-MM-yyyy HH:mm' }}</label>
                    </div>
                  </div>
                  <ion-icon name="bookmark"></ion-icon>
                  <label class="titles">{{index.model.name}}</label>
                </ion-card-content>
              </ion-card>
            </ng-container>
          </ng-container>
        </ng-container>


      </super-tab>
      <super-tab>
        <ng-container *ngFor="let box of boxes">
          <ng-container *ngFor='let index of box.devices'>
            <ng-container *ngIf="index.indicator.name=='Tension' && index.mesures['0'] ">
              <ion-card>
                <ion-card-header>
                  <ion-label>{{box.name}}</ion-label>
                </ion-card-header>
                <ion-card-content>
                  <div class="row">
                    <div class="col-12">
                      <label class="titles" style="margin-top: 10px;">{{index.name}}</label>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-12">
                      <ion-icon name="speedometer"></ion-icon>
                      <label class="titles" style="-webkit-text-stroke-width: thin;">{{index.mesures[0].valeur1}} |
                        {{index.mesures[0].valeur2}} |
                        {{index.mesures[0].valeur3}}</label>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-12">
                      <ion-icon name="time"></ion-icon>
                      <label class="titles">{{index.mesures[0].createdAt.date | date: 'dd-MM-yyyy HH:mm' }}</label>
                    </div>
                  </div>
                  <ion-icon name="bookmark"></ion-icon>
                  <label class="titles">{{index.model.name}}</label>
                </ion-card-content>
              </ion-card>
            </ng-container>
          </ng-container>
        </ng-container>


      </super-tab>
      <super-tab>
        <ng-container *ngFor="let box of boxes">
          <ng-container *ngFor='let index of box.devices'>
            <ng-container *ngIf="index.indicator.name=='Puissance' && index.mesures['0'] ">
              <ion-card>
                <ion-card-header>
                  <ion-label>{{box.name}}</ion-label>
                </ion-card-header>
                <ion-card-content>
                  <div class="row">
                    <div class="col-12">
                      <label class="titles" style="margin-top: 10px;">{{index.name}}</label>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-12">
                      <ion-icon name="speedometer"></ion-icon>
                      <label class="titles" style="-webkit-text-stroke-width: thin;">{{index.mesures[0].valeur1}} |
                        {{index.mesures[0].valeur2}} |
                        {{index.mesures[0].valeur3}}</label>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-12">
                      <ion-icon name="time"></ion-icon>
                      <label class="titles">{{index.mesures[0].createdAt.date | date: 'dd-MM-yyyy HH:mm' }}</label>
                    </div>
                  </div>
                  <ion-icon name="bookmark"></ion-icon>
                  <label class="titles">{{index.model.name}}</label>
                </ion-card-content>
              </ion-card>
            </ng-container>
          </ng-container>
        </ng-container>


      </super-tab>
    </super-tabs-container>
  </super-tabs>
</ion-content>


<ion-footer no-padding no-marging>

  <ion-segment no-padding no-marging [(ngModel)]="segment">
    <ion-segment-button value="bill" checked [routerLink]="'/bill/'+ this?.idSite" routerDirection="forward">
      <ion-icon size="small" name="cash" style="margin-top: 0px;color: white;">
      </ion-icon>
    </ion-segment-button>

    <ion-segment-button value="monitor" [routerLink]="'/monitor/'+ this?.idSite" routerDirection="forward">
      <ion-icon size="small" name="desktop" style="margin-top: 0px;color: white;"></ion-icon>
    </ion-segment-button>

    <ion-segment-button value="quality" [routerLink]="'/quality/'+ this?.idSite" routerDirection="forward">
      <ion-icon size="small" name="checkmark-done-circle" style="margin-top: 0px;color: white;"></ion-icon>
    </ion-segment-button>

    <ion-segment-button value="alarme" [routerLink]="'/alarme/'+ this?.idSite" routerDirection="forward">
      <ion-icon size="small" name="notifications" style="margin-top: 0px;color: white;"></ion-icon>
    </ion-segment-button>


    <ion-segment-button value="environment" [routerLink]="'/environment/'+ this?.idSite" routerDirection="forward">
      <ion-icon size="small" name="earth" style="margin-top: 0px;color: white;"></ion-icon>
    </ion-segment-button>

    <ion-segment-button value="actionneur" [routerLink]="'/actionneur/'+ this?.idSite" routerDirection="forward">
      <ion-icon size="small" name="receipt" style="margin-top: 0px;color: white;"></ion-icon>
    </ion-segment-button>

  </ion-segment>

</ion-footer>